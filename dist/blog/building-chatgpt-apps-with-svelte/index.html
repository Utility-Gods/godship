<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.ico"><meta name="generator" content="Astro v4.16.19"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet"><!-- 100% privacy-first analytics --><script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script><title>Building ChatGPT Apps with Svelte 5 | Utility Gods</title><link rel="canonical" href="https://www.utilitygods.com/blog/building-chatgpt-apps-with-svelte/"><meta name="description" content="A step-by-step guide to building custom UX widgets for ChatGPT using Svelte 5 and the Apps SDK."><meta name="robots" content="index, follow"><meta property="og:title" content="Building ChatGPT Apps with Svelte 5 | Utility Gods"><meta property="og:type" content="website"><meta property="og:image" content="https://www.utilitygods.com/blog/svelte-chatgpt-apps.png"><meta property="og:url" content="https://www.utilitygods.com/blog/building-chatgpt-apps-with-svelte/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="www.utilitygods.com"><meta name="twitter:creator" content="UtilityGods"><title>Building ChatGPT Apps with Svelte 5</title><link rel="stylesheet" href="/_astro/about.B9Xp0DWP.css">
<style>nav[data-astro-cid-5knycien] li[data-astro-cid-5knycien] a[data-astro-cid-5knycien]{position:relative}@media (min-width: 1024px){nav[data-astro-cid-5knycien] li[data-astro-cid-5knycien] a[data-astro-cid-5knycien]:after{content:"";position:absolute;bottom:0;left:50%;width:0;height:2px;background:#ef4444;transition:all .3s ease;transform:translate(-50%)}nav[data-astro-cid-5knycien] li[data-astro-cid-5knycien] a[data-astro-cid-5knycien]:hover:after,nav[data-astro-cid-5knycien] li[data-astro-cid-5knycien] a[data-astro-cid-5knycien][aria-current=page]:after{width:100%}}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-cyrillic-ext-400-normal.BQZuk6qB.woff2) format("woff2"),url(/_astro/inter-cyrillic-ext-400-normal.DQukG94-.woff) format("woff");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-cyrillic-400-normal.obahsSVq.woff2) format("woff2"),url(/_astro/inter-cyrillic-400-normal.HOLc17fK.woff) format("woff");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-greek-ext-400-normal.DGGRlc-M.woff2) format("woff2"),url(/_astro/inter-greek-ext-400-normal.KugGGMne.woff) format("woff");unicode-range:U+1F00-1FFF}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-greek-400-normal.B4URO6DV.woff2) format("woff2"),url(/_astro/inter-greek-400-normal.q2sYcFCs.woff) format("woff");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-vietnamese-400-normal.DMkecbls.woff2) format("woff2"),url(/_astro/inter-vietnamese-400-normal.Bbgyi5SW.woff) format("woff");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-latin-ext-400-normal.C1nco2VV.woff2) format("woff2"),url(/_astro/inter-latin-ext-400-normal.77YHD8bZ.woff) format("woff");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Inter;font-style:normal;font-display:swap;font-weight:400;src:url(/_astro/inter-latin-400-normal.C38fXH4l.woff2) format("woff2"),url(/_astro/inter-latin-400-normal.CyCys3Eg.woff) format("woff");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}:root{--accent: 136, 58, 234;--accent-light: 224, 204, 250;--accent-dark: 49, 10, 101;--accent-gradient: linear-gradient( 45deg, rgb(var(--accent)), rgb(var(--accent-light)) 30%, white 60% )}html{font-family:Roboto,system-ui,sans-serif;background:#fff;background-size:224px;scroll-behavior:smooth}h1,h2,h3,h4,h5,h6{font-family:Montserrat,system-ui,sans-serif}img{content-visibility:auto}html,body{width:100%;height:100%;margin:0;padding:0}
</style><script type="module" src="/_astro/hoisted.Bq5PsS9r.js"></script></head> <body class="font-roboto"> <div class="max-w-screen-xl mx-auto px-5">  <header class="flex flex-col lg:flex-row justify-between items-center my-5" data-astro-cid-5knycien> <div class="flex w-full lg:w-auto items-center justify-between" data-astro-cid-5knycien> <a href="/" class="text-2xl font-black text-slate-900 flex items-center gap-3" data-astro-cid-5knycien> <img src="/logo-removebg.png" alt="Utility Gods Logo" class="w-32 object-contain" data-astro-cid-5knycien> </a> <div class="block lg:hidden" data-astro-cid-5knycien> <button id="menu" aria-label="Toggle menu" class="text-slate-800 hover:text-red-500" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-6 h-6" data-astro-cid-5knycien data-icon="ph:list-bold">   <symbol id="ai:ph:list-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M228 128a12 12 0 0 1-12 12H40a12 12 0 0 1 0-24h176a12 12 0 0 1 12 12M40 76h176a12 12 0 0 0 0-24H40a12 12 0 0 0 0 24m176 104H40a12 12 0 0 0 0 24h176a12 12 0 0 0 0-24"/></symbol><use href="#ai:ph:list-bold"></use>  </svg> </button> </div> </div> <nav class="hidden w-full lg:w-auto mt-2 lg:flex lg:mt-0" id="navbar" data-astro-cid-5knycien> <ul class="flex flex-col lg:flex-row gap-3" data-astro-cid-5knycien> <li data-astro-cid-5knycien> <a href="/" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:house-bold">   <symbol id="ai:ph:house-bold" viewBox="0 0 256 256"><path fill="currentColor" d="m222.14 105.85l-80-80a20 20 0 0 0-28.28 0l-80 80A19.86 19.86 0 0 0 28 120v96a12 12 0 0 0 12 12h64a12 12 0 0 0 12-12v-52h24v52a12 12 0 0 0 12 12h64a12 12 0 0 0 12-12v-96a19.86 19.86 0 0 0-5.86-14.15M204 204h-40v-52a12 12 0 0 0-12-12h-48a12 12 0 0 0-12 12v52H52v-82.35l76-76l76 76Z"/></symbol><use href="#ai:ph:house-bold"></use>  </svg> <span data-astro-cid-5knycien>Home</span>  </a> </li><li data-astro-cid-5knycien> <a href="/about" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:info-bold">   <symbol id="ai:ph:info-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M108 84a16 16 0 1 1 16 16a16 16 0 0 1-16-16m128 44A108 108 0 1 1 128 20a108.12 108.12 0 0 1 108 108m-24 0a84 84 0 1 0-84 84a84.09 84.09 0 0 0 84-84m-72 36.68V132a20 20 0 0 0-20-20a12 12 0 0 0-4 23.32V168a20 20 0 0 0 20 20a12 12 0 0 0 4-23.32"/></symbol><use href="#ai:ph:info-bold"></use>  </svg> <span data-astro-cid-5knycien>About</span>  </a> </li><li data-astro-cid-5knycien> <a href="/services" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:stack-bold">   <symbol id="ai:ph:stack-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M234.36 170a12 12 0 0 1-4.36 16.37l-96 56a12 12 0 0 1-12.1 0l-96-56a12 12 0 0 1 12.09-20.74l90 52.48L218 165.63a12 12 0 0 1 16.36 4.37M218 117.63l-90 52.48l-89.95-52.48A12 12 0 0 0 26 138.37l96 56a12 12 0 0 0 12.1 0l96-56a12 12 0 0 0-12.1-20.74M20 80a12 12 0 0 1 6-10.37l96-56a12.06 12.06 0 0 1 12.1 0l96 56a12 12 0 0 1 0 20.74l-96 56a12 12 0 0 1-12.1 0l-96-56A12 12 0 0 1 20 80m35.82 0L128 122.11L200.18 80L128 37.89Z"/></symbol><use href="#ai:ph:stack-bold"></use>  </svg> <span data-astro-cid-5knycien>Services</span>  </a> </li><li data-astro-cid-5knycien> <a href="/team" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:users-bold">   <symbol id="ai:ph:users-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M125.18 156.94a64 64 0 1 0-82.36 0a100.23 100.23 0 0 0-39.49 32a12 12 0 0 0 19.35 14.2a76 76 0 0 1 122.64 0a12 12 0 0 0 19.36-14.2a100.33 100.33 0 0 0-39.5-32M44 108a40 40 0 1 1 40 40a40 40 0 0 1-40-40m206.1 97.67a12 12 0 0 1-16.78-2.57A76.31 76.31 0 0 0 172 172a12 12 0 0 1 0-24a40 40 0 1 0-10.3-78.67a12 12 0 1 1-6.16-23.19a64 64 0 0 1 57.64 110.8a100.23 100.23 0 0 1 39.49 32a12 12 0 0 1-2.57 16.73"/></symbol><use href="#ai:ph:users-bold"></use>  </svg> <span data-astro-cid-5knycien>Team</span>  </a> </li><li data-astro-cid-5knycien> <a href="/blog" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:newspaper-bold">   <symbol id="ai:ph:newspaper-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M92 108a12 12 0 0 1 12-12h72a12 12 0 0 1 0 24h-72a12 12 0 0 1-12-12m12 52h72a12 12 0 0 0 0-24h-72a12 12 0 0 0 0 24m132-96v120a28 28 0 0 1-28 28H36a32 32 0 0 1-32-32V88a12 12 0 0 1 24 0v92a8 8 0 0 0 16 0V64a20 20 0 0 1 20-20h152a20 20 0 0 1 20 20m-24 4H68v112a32 32 0 0 1-1 8h141a4 4 0 0 0 4-4Z"/></symbol><use href="#ai:ph:newspaper-bold"></use>  </svg> <span data-astro-cid-5knycien>Blog</span>  </a> </li><li data-astro-cid-5knycien> <a href="/testimonials" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:star-bold">   <symbol id="ai:ph:star-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M243 96a20.33 20.33 0 0 0-17.74-14l-56.59-4.57l-21.84-52.81a20.36 20.36 0 0 0-37.66 0L87.35 77.44L30.76 82a20.45 20.45 0 0 0-11.66 35.88l43.18 37.24l-13.2 55.7A20.37 20.37 0 0 0 79.57 233L128 203.19L176.43 233a20.39 20.39 0 0 0 30.49-22.15l-13.2-55.7l43.18-37.24A20.43 20.43 0 0 0 243 96m-70.47 45.7a12 12 0 0 0-3.84 11.86L181.58 208l-47.29-29.08a12 12 0 0 0-12.58 0L74.42 208l12.89-54.4a12 12 0 0 0-3.84-11.86l-42.27-36.5l55.4-4.47a12 12 0 0 0 10.13-7.38L128 41.89l21.27 51.5a12 12 0 0 0 10.13 7.38l55.4 4.47Z"/></symbol><use href="#ai:ph:star-bold"></use>  </svg> <span data-astro-cid-5knycien>Testimonials</span>  </a> </li><li data-astro-cid-5knycien> <a href="/contact" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" viewBox="0 0 256 256" class="w-4 h-4 lg:hidden" data-astro-cid-5knycien data-icon="ph:envelope-bold">   <use href="#ai:ph:envelope-bold"></use>  </svg> <span data-astro-cid-5knycien>Contact</span>  </a> </li> <li data-astro-cid-5knycien> <a href="https://github.com/Utility-Gods" target="_blank" class="flex lg:px-3 py-2 items-center gap-2 text-slate-600 hover:text-red-500 transition-colors" data-astro-cid-5knycien> <svg width="1em" height="1em" viewBox="0 0 256 256" class="w-5 h-5" data-astro-cid-5knycien data-icon="ph:github-logo-bold">   <use href="#ai:ph:github-logo-bold"></use>  </svg> <span class="lg:hidden" data-astro-cid-5knycien>GitHub</span> </a> </li> </ul> </nav> </header>  </div>    <div class="max-w-screen-xl mx-auto px-5">  <div class="max-w-3xl mx-auto"> <span class="text-red-500 uppercase tracking-wider text-sm font-medium"> Web Development </span> <h1 class="text-4xl lg:text-5xl font-bold lg:tracking-tight mt-1 lg:leading-tight"> Building ChatGPT Apps with Svelte 5 </h1> <div class="flex gap-2 mt-3 items-center flex-wrap md:flex-nowrap"> <span class="text-gray-400"> <svg width="1em" height="1em" class="w-4 h-4 inline-block" data-icon="ph:user-bold">   <symbol id="ai:ph:user-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M234.38 210a123.36 123.36 0 0 0-60.78-53.23a76 76 0 1 0-91.2 0A123.36 123.36 0 0 0 21.62 210a12 12 0 1 0 20.77 12c18.12-31.32 50.12-50 85.61-50s67.49 18.69 85.61 50a12 12 0 0 0 20.77-12M76 96a52 52 0 1 1 52 52a52.06 52.06 0 0 1-52-52"/></symbol><use href="#ai:ph:user-bold"></use>  </svg> Siddharth Jain </span> <span class="text-gray-400">•</span> <time class="text-gray-400" datetime="Fri Oct 10 2025 05:30:00 GMT+0530 (India Standard Time)"> <svg width="1em" height="1em" class="w-4 h-4 inline-block" data-icon="ph:calendar-bold">   <symbol id="ai:ph:calendar-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M208 28h-20v-4a12 12 0 0 0-24 0v4H92v-4a12 12 0 0 0-24 0v4H48a20 20 0 0 0-20 20v160a20 20 0 0 0 20 20h160a20 20 0 0 0 20-20V48a20 20 0 0 0-20-20M68 52a12 12 0 0 0 24 0h72a12 12 0 0 0 24 0h16v24H52V52ZM52 204V100h152v104Zm60-80v56a12 12 0 0 1-24 0v-36.68a12 12 0 0 1-9.37-22l16-8A12 12 0 0 1 112 124m61.49 33.88L163.9 168h4.1a12 12 0 0 1 0 24h-32a12 12 0 0 1-8.71-20.25L155.45 142a4 4 0 0 0 .55-2a4 4 0 0 0-7.47-2a12 12 0 0 1-20.78-12A28 28 0 0 1 180 140a27.77 27.77 0 0 1-5.64 16.86a11 11 0 0 1-.87 1.02"/></symbol><use href="#ai:ph:calendar-bold"></use>  </svg> October 10, 2025 </time> <span class="text-gray-400 hidden md:block">•</span> <div class="w-full md:w-auto flex flex-wrap gap-3"> <span class="text-sm text-gray-500">#svelte</span><span class="text-sm text-gray-500">#chatgpt</span><span class="text-sm text-gray-500">#openai</span><span class="text-sm text-gray-500">#mcp</span><span class="text-sm text-gray-500">#ai</span><span class="text-sm text-gray-500">#web-development</span><span class="text-sm text-gray-500">#typescript</span> </div> </div> </div> <div class="mx-auto max-w-4xl mt-6"> <img src="/blog/svelte-chatgpt-apps.png" alt="Building ChatGPT Apps with Svelte 5" class="rounded-xl" width="1200" height="600" loading="lazy" decoding="async"> </div> <div class="max-w-3xl mx-auto mt-6"> <div class="prose prose-lg mt-6 max-w-none">  <p>ChatGPT launched Apps SDK few days ago on their dev day, i was following it and found it really intruiguing, so like a regular next person i started reading the docs and
its pretty sweet setup, they have an MCP server with such and such contract and eventualy they pass some data to some component and that component renders inside ChatGPT app.</p>
<p>However I saw they used React for the component part and as a <strong>long time lover of svelte/kit scene</strong> i instantly asked myself what if i could do this in svelte. I mean why not? it ultimately compiles down
to js and its all the same from there.</p>
<h2 id="so-i-started-building-a-svelte-widget">So I started building a svelte widget</h2>
<p><a href="https://github.com/Utility-Gods/chatgpt-apps-sdk-svelte">Here is the github repo for the widget</a></p>
<p>The <a href="https://developers.openai.com/apps-sdk/build/mcp-server">MCP server setup</a> is standard across all frameworks. This guide focuses only on the <strong>widget component</strong> that renders in ChatGPT.</p>
<h2 id="project-setup">Project Setup</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> vite@latest</span><span style="color:#9ECBFF"> chatgpt-widget</span><span style="color:#79B8FF"> --</span><span style="color:#79B8FF"> --template</span><span style="color:#9ECBFF"> svelte-ts</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> chatgpt-widget</span></span>
<span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> install</span></span>
<span class="line"></span></code></pre>
<p>Pretty standard setup, it will just compiles to a single JS file that we will send to ChatGPT and it will render it inside an Iframe.</p>
<blockquote>
<p>The Iframe you like is going to come back into style.</p>
</blockquote>
<h2 id="define-typescript-types">Define TypeScript Types</h2>
<p>First things first, let’s tell TypeScript what the heck <code>window.openai</code> actually is. Create an <code>app.d.ts</code> file and throw this in there:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> DisplayMode</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "inline"</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> "fullscreen"</span><span style="color:#F97583"> |</span><span style="color:#9ECBFF"> "pip"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> UnknownObject</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Record</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">unknown</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> CallToolResponse</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  content</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Array</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">type</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">text</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>;</span></span>
<span class="line"><span style="color:#FFAB70">  structuredContent</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  _meta</span><span style="color:#F97583">?:</span><span style="color:#B392F0"> Record</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">any</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> OpenAIAPI</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">WidgetState</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> UnknownObject</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> UnknownObject</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#6A737D">  /** The data returned by your MCP tool */</span></span>
<span class="line"><span style="color:#FFAB70">  toolOutput</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  /** Calls a tool on your MCP. Returns the full response. */</span></span>
<span class="line"><span style="color:#B392F0">  callTool</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#FFAB70">    name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    args</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Record</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">string</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">unknown</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  ) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">CallToolResponse</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  /** Triggers a followup turn in the ChatGPT conversation */</span></span>
<span class="line"><span style="color:#B392F0">  sendFollowUpMessage</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">args</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">prompt</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">void</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  /** Opens an external link, redirects web page or mobile app */</span></span>
<span class="line"><span style="color:#B392F0">  openExternal</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">payload</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">href</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  /** For transitioning an app from inline to fullscreen or pip */</span></span>
<span class="line"><span style="color:#B392F0">  requestDisplayMode</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">args</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">mode</span><span style="color:#F97583">:</span><span style="color:#B392F0"> DisplayMode</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;{</span></span>
<span class="line"><span style="color:#FFAB70">    mode</span><span style="color:#F97583">:</span><span style="color:#B392F0"> DisplayMode</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// The granted display mode (host may reject)</span></span>
<span class="line"><span style="color:#E1E4E8">  }>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  /** Persist state across widget sessions */</span></span>
<span class="line"><span style="color:#B392F0">  setWidgetState</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">state</span><span style="color:#F97583">:</span><span style="color:#B392F0"> WidgetState</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">void</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> Window</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  openai</span><span style="color:#F97583">?:</span><span style="color:#B392F0"> OpenAIAPI</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>These are all the methods <a href="https://developers.openai.com/apps-sdk/build/custom-ux">ChatGPT Apps SDK</a> gives you to play with. Pretty neat stuff.</p>
<h2 id="create-your-widget-component">Create Your Widget Component</h2>
<p>Alright, now for the fun part. Your widget needs to do three things:</p>
<h3 id="set-up-reactive-state">Set Up Reactive State</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">script</span><span style="color:#B392F0"> lang</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"ts"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> toolOutput </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> $</span><span style="color:#B392F0">state</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">any</span><span style="color:#E1E4E8">>(</span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> isLoading </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> $</span><span style="color:#B392F0">state</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<h3 id="listen-for-data-from-chatgpt">Listen for Data from ChatGPT</h3>
<p>ChatGPT sends data via the <code>openai:set_globals</code> event. Use <code>onMount</code> to set up the listener:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">script</span><span style="color:#B392F0"> lang</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"ts"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#F97583">  import</span><span style="color:#E1E4E8"> { onMount } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'svelte'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> SET_GLOBALS_EVENT_TYPE</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> 'openai:set_globals'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  onMount</span><span style="color:#E1E4E8">(() </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Check for initial data</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#B392F0"> updateToolOutput</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">typeof</span><span style="color:#E1E4E8"> window </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> 'undefined'</span><span style="color:#F97583"> &#x26;&#x26;</span><span style="color:#E1E4E8"> window.openai?.toolOutput) {</span></span>
<span class="line"><span style="color:#E1E4E8">        toolOutput </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> window.openai.toolOutput;</span></span>
<span class="line"><span style="color:#E1E4E8">        isLoading </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">    updateToolOutput</span><span style="color:#E1E4E8">(); </span><span style="color:#6A737D">// Run immediately</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Listen for future updates</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#B392F0"> handleSetGlobal</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">event</span><span style="color:#F97583">:</span><span style="color:#B392F0"> CustomEvent</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> value</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> event.detail?.globals?.toolOutput;</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#E1E4E8"> (value </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">        toolOutput </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> value;</span></span>
<span class="line"><span style="color:#E1E4E8">        isLoading </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    window.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">SET_GLOBALS_EVENT_TYPE</span><span style="color:#E1E4E8">, handleSetGlobal </span><span style="color:#F97583">as</span><span style="color:#B392F0"> EventListener</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Cleanup on unmount</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      window.</span><span style="color:#B392F0">removeEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">SET_GLOBALS_EVENT_TYPE</span><span style="color:#E1E4E8">, handleSetGlobal </span><span style="color:#F97583">as</span><span style="color:#B392F0"> EventListener</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<h2 id="render-the-data">Render the Data</h2>
<p>Now just slap your data into the template:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">{#</span><span style="color:#F97583">if</span><span style="color:#E1E4E8"> isLoading}</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"loading"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>Loading...&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">{:</span><span style="color:#F97583">else if</span><span style="color:#E1E4E8"> toolOutput?.type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'hotel_search'</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  {@</span><span style="color:#F97583">const</span><span style="color:#79B8FF"> hotels</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> toolOutput.hotels}</span></span>
<span class="line"><span style="color:#E1E4E8">  {@</span><span style="color:#F97583">const</span><span style="color:#79B8FF"> filters</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> toolOutput.searchFilters}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"container"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">h2</span><span style="color:#E1E4E8">>Hotels in {filters.location}&#x3C;/</span><span style="color:#85E89D">h2</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    {#</span><span style="color:#F97583">each</span><span style="color:#E1E4E8"> hotels </span><span style="color:#F97583">as</span><span style="color:#E1E4E8"> hotel}</span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"hotel-card"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">h3</span><span style="color:#E1E4E8">>{hotel.name}&#x3C;/</span><span style="color:#85E89D">h3</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>{hotel.description}&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"rating"</span><span style="color:#E1E4E8">>{hotel.guestRating}/10&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    {/</span><span style="color:#F97583">each</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">{/</span><span style="color:#F97583">if</span><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h2 id="using-the-windowopenai-api">Using the window.openai API</h2>
<p>Your widget isn’t just sitting there looking pretty - it can actually talk back to ChatGPT. Here’s what you can do:</p>
<h3 id="trigger-follow-up-conversations">Trigger Follow-up Conversations</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">script</span><span style="color:#B392F0"> lang</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"ts"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> handleHotelSelect</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">hotel</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Hotel</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> window.openai?.</span><span style="color:#B392F0">sendFollowUpMessage</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">      prompt: </span><span style="color:#9ECBFF">`Search for rooms at ${</span><span style="color:#E1E4E8">hotel</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">name</span><span style="color:#9ECBFF">} (ID: ${</span><span style="color:#E1E4E8">hotel</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">id</span><span style="color:#9ECBFF">})`</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<p>This sends a message to ChatGPT, which then figures out what to do next. Like when user clicks a hotel, you tell ChatGPT “hey, search for rooms in this hotel” and it handles the rest.</p>
<h3 id="call-tools-directly">Call Tools Directly</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">async function refreshData() {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> response</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> window.openai?.</span><span style="color:#B392F0">callTool</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'searchHotels'</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">    location: </span><span style="color:#9ECBFF">'Cape Town'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    checkIn: </span><span style="color:#9ECBFF">'2025-10-15'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    checkOut: </span><span style="color:#9ECBFF">'2025-10-17'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    guests: </span><span style="color:#79B8FF">2</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#6A737D">  // You get back: { content, structuredContent, _meta }</span></span>
<span class="line"><span style="color:#E1E4E8">  toolOutput </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> response.structuredContent; </span><span style="color:#6A737D">// Update your UI</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>This one’s different - it directly calls your MCP tool and gives you the response back. No conversation, just straight data fetch. Useful for refresh buttons and stuff.</p>
<h3 id="other-neat-tricks">Other Neat Tricks</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">// Open external links (booking pages, etc)</span></span>
<span class="line"><span style="color:#E1E4E8">window.openai?.openExternal({ </span><span style="color:#B392F0">href</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'https://booking.com/...'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">// Go fullscreen (ChatGPT may say no though)</span></span>
<span class="line"><span style="color:#E1E4E8">const result = await window.openai?.requestDisplayMode({ </span><span style="color:#B392F0">mode</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'fullscreen'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">// Save state across sessions</span></span>
<span class="line"><span style="color:#E1E4E8">await window.openai?.setWidgetState({ </span><span style="color:#B392F0">lastSearch</span><span style="color:#E1E4E8">: filters });</span></span>
<span class="line"></span></code></pre>
<h2 id="the-server-side-quick-version">The Server Side (Quick Version)</h2>
<p>On the <a href="https://developers.openai.com/apps-sdk/build/mcp-server">MCP server</a> side, your tool handler returns three things:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#E1E4E8">server.</span><span style="color:#B392F0">setRequestHandler</span><span style="color:#E1E4E8">(CallToolRequestSchema, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">request</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    content: [{ type: </span><span style="color:#9ECBFF">"text"</span><span style="color:#E1E4E8">, text: </span><span style="color:#9ECBFF">"Found 4 hotels in Cape Town"</span><span style="color:#E1E4E8"> }], </span><span style="color:#6A737D">// For the LLM</span></span>
<span class="line"><span style="color:#E1E4E8">    structuredContent: {</span></span>
<span class="line"><span style="color:#6A737D">      // For your widget</span></span>
<span class="line"><span style="color:#E1E4E8">      type: </span><span style="color:#9ECBFF">"hotel_search"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      hotels: hotels, </span><span style="color:#6A737D">// Import from ../src/data/hotels.ts</span></span>
<span class="line"><span style="color:#E1E4E8">      searchFilters: { location, checkIn, checkOut, guests },</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">    _meta: {</span></span>
<span class="line"><span style="color:#9ECBFF">      "openai/outputTemplate"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"ui://widget/hotels.html"</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Which widget to render</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<p><strong>Pro tip:</strong> We actually import the same <code>hotels</code> data that the widget uses for fallback. No duplication, one source of truth. Check our <a href="https://github.com/Utility-Gods/chatgpt-apps-sdk-svelte/blob/main/server/src/server.ts">server code</a> to see how.</p>
<h2 id="build-and-integrate">Build and Integrate</h2>
<p>When you’re ready, build the widget:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">npm</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> build</span></span>
<span class="line"></span></code></pre>
<p>This creates <code>dist/widget.js</code> and <code>dist/widget.css</code>. Your MCP server reads these and inlines them in the HTML response:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="typescript"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> widgetScript</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> readFileSync</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"./dist/widget.js"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"utf8"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> widgetCSS</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> readFileSync</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"./dist/widget.css"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"utf8"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">server.</span><span style="color:#B392F0">setRequestHandler</span><span style="color:#E1E4E8">(ReadResourceRequestSchema, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">request</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    contents: [</span></span>
<span class="line"><span style="color:#E1E4E8">      {</span></span>
<span class="line"><span style="color:#E1E4E8">        uri: </span><span style="color:#9ECBFF">"ui://widget/hotels.html"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        mimeType: </span><span style="color:#9ECBFF">"text/html+skybridge"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        text: </span><span style="color:#9ECBFF">`</span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;!DOCTYPE html></span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;html></span></span>
<span class="line"><span style="color:#9ECBFF">          &#x3C;head></span></span>
<span class="line"><span style="color:#9ECBFF">            &#x3C;style>${</span><span style="color:#E1E4E8">widgetCSS</span><span style="color:#9ECBFF">}&#x3C;/style></span></span>
<span class="line"><span style="color:#9ECBFF">          &#x3C;/head></span></span>
<span class="line"><span style="color:#9ECBFF">          &#x3C;body></span></span>
<span class="line"><span style="color:#9ECBFF">            &#x3C;div id="app">&#x3C;/div></span></span>
<span class="line"><span style="color:#9ECBFF">            &#x3C;script type="module">${</span><span style="color:#E1E4E8">widgetScript</span><span style="color:#9ECBFF">}&#x3C;/script></span></span>
<span class="line"><span style="color:#9ECBFF">          &#x3C;/body></span></span>
<span class="line"><span style="color:#9ECBFF">        &#x3C;/html></span></span>
<span class="line"><span style="color:#9ECBFF">      `</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#E1E4E8">    ],</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<p>ChatGPT requests this HTML when it needs to render your widget, and boom - your Svelte app loads in the iframe.</p>
<h2 id="complete-example">Complete Example</h2>
<p>The full code is on <a href="https://github.com/Utility-Gods/chatgpt-apps-sdk-svelte">GitHub</a> if you want to see it all together. Here’s the simplified version:</p>
<p>The timestamp in both the HTML and as a comment in the script ensures every response is unique. ChatGPT can’t cache what’s always changing.</p>
<hr>
<h2 id="gotchas-we-hit">Gotchas We Hit</h2>
<h3 id="one-widget-for-multiple-tools">One Widget for Multiple Tools</h3>
<p>should be possible to have widget per tool/tempalte. But for he demonstation purpos we are bundling evetything toghether.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">{#</span><span style="color:#F97583">if</span><span style="color:#E1E4E8"> toolOutput?.type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'hotel_search'</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#79B8FF">HotelSearch</span><span style="color:#B392F0"> data</span><span style="color:#E1E4E8">={toolOutput} /></span></span>
<span class="line"><span style="color:#E1E4E8">{:</span><span style="color:#F97583">else if</span><span style="color:#E1E4E8"> toolOutput?.type </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'room_search'</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#79B8FF">RoomSearch</span><span style="color:#B392F0"> data</span><span style="color:#E1E4E8">={toolOutput} /></span></span>
<span class="line"><span style="color:#E1E4E8">{/</span><span style="color:#F97583">if</span><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="widget-loading-and-updates">Widget Loading and Updates</h3>
<p>ChatGPT calls <code>ReadResource</code> for your widget URI only once when the app initializes. After that, it caches the widget HTML.</p>
<p>This means if you rebuild your widget (<code>yarn build</code>), ChatGPT won’t fetch the new version - it already has it. The only way to get updates is to <strong>delete and recreate the app</strong> in ChatGPT settings.</p>
<p>We tried cache headers, random URIs, timestamps - none of it mattered. ChatGPT loads your widget once per app lifetime, period. Plan your dev workflow accordingly.</p>
<h3 id="data-structure-mismatch-moving-fast-breaking-stuff">Data Structure Mismatch, moving fast breaking stuff</h3>
<p>The docs show <code>toolOutput</code> should contain your <code>structuredContent</code> directly, but ChatGPT actually wraps it in a <code>result</code> object when sending through events. Handle both formats:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="svelte"><code><span class="line"><span style="color:#E1E4E8">const handleSetGlobal = (event: CustomEvent) => {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> value</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> event.detail?.globals?.toolOutput;</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (value?.result?.structuredContent) {</span></span>
<span class="line"><span style="color:#E1E4E8">    toolOutput </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> value.result.structuredContent; </span><span style="color:#6A737D">// Actual format</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    toolOutput </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> value; </span><span style="color:#6A737D">// Docs format</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<h3 id="use-cloudflare-tunnel-not-ngrok">Use Cloudflare Tunnel, Not ngrok</h3>
<p>When testing your MCP server with ChatGPT, use <a href="https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/">Cloudflare Tunnel</a> instead of ngrok. It’s free, doesn’t timeout, and gives you stable URLs:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Quick start</span></span>
<span class="line"><span style="color:#B392F0">cloudflared</span><span style="color:#9ECBFF"> tunnel</span><span style="color:#79B8FF"> --url</span><span style="color:#9ECBFF"> http://localhost:3000</span></span>
<span class="line"></span></code></pre>
<p>You get a URL like <code>https://random-words.trycloudflare.com</code> that stays up as long as your tunnel runs. No session limits, no random disconnects. Plus you can monitor traffic through the Cloudflare dashboard.</p>
<hr>
<h2 id="thats-it">That’s It</h2>
<p>Svelte works great for ChatGPT widgets. The compiled output is tiny, the code is clean, and you don’t need to learn React if you already know Svelte.</p>
<p>The <a href="https://github.com/Utility-Gods/chatgpt-apps-sdk-svelte">full working example is on GitHub</a> - clone it, mess with it, build something cool.</p>
<h2 id="demo-screenshots">Demo Screenshots</h2>
<p>Here’s what it looks like running in ChatGPT:</p>
<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin: 2rem 0;">
  <img src="/blog/chatgpt-widget-demo-1.png" alt="Hotel search widget in ChatGPT" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
  <img src="/blog/chatgpt-widget-demo-2.png" alt="Widget showing hotel details" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
  <img src="/blog/chatgpt-widget-demo-3.png" alt="Fullscreen mode demonstration" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
  <img src="/blog/chatgpt-widget-demo-4.png" alt="Interactive hotel browsing" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
</div>  </div> <div class="mt-8 flex flex-col md:flex-row justify-between items-center gap-4"> <a href="/blog" class="bg-gray-100 px-5 py-3 rounded-md hover:bg-gray-200 transition">← Back to Blog</a> <div class="flex items-center gap-4"> <span class="text-gray-500">Share:</span> <a href="https://twitter.com/intent/tweet?text=Building%20ChatGPT%20Apps%20with%20Svelte%205&url=https%3A%2F%2Fwww.utilitygods.com%2Fblog%2Fbuilding-chatgpt-apps-with-svelte%2F" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-red-500"> <svg width="1em" height="1em" class="w-5 h-5" data-icon="ph:twitter-logo-bold">   <symbol id="ai:ph:twitter-logo-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M251.09 67.41A12 12 0 0 0 240 60h-28.18a52.73 52.73 0 0 0-43.67-24a50.85 50.85 0 0 0-36.6 14.85A51.87 51.87 0 0 0 116 88v.78c-36.83-11.57-66.38-40.9-66.7-41.23a12 12 0 0 0-20.47 7.38c-6.31 70.17 24.65 107.79 42.06 123.12C56.4 192.83 36 200.68 35.8 200.76a12 12 0 0 0-5.8 17.9C32 221.55 43.44 236 80 236c72.25 0 132.7-55.26 139.6-126.63l28.88-28.88a12 12 0 0 0 2.61-13.08m-51.57 28.11a11.93 11.93 0 0 0-3.49 7.72C192.14 164.23 141.18 212 80 212a91 91 0 0 1-12.49-.79C78 204.55 89.72 195.07 98 182.66a12 12 0 0 0-3.9-17c-.12-.07-12.33-7.49-23.43-24.42s-17.26-37-18.46-59.78C69.37 94.4 96 110.79 126 115.84A12 12 0 0 0 140 104V88a28 28 0 0 1 8.41-20.07A27.07 27.07 0 0 1 167.86 60a28.83 28.83 0 0 1 25.82 16.81a12 12 0 0 0 11 7.19H211Z"/></symbol><use href="#ai:ph:twitter-logo-bold"></use>  </svg> </a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fwww.utilitygods.com%2Fblog%2Fbuilding-chatgpt-apps-with-svelte%2F&title=Building%20ChatGPT%20Apps%20with%20Svelte%205" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-red-500"> <svg width="1em" height="1em" class="w-5 h-5" data-icon="ph:linkedin-logo-bold">   <symbol id="ai:ph:linkedin-logo-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M216 20H40a20 20 0 0 0-20 20v176a20 20 0 0 0 20 20h176a20 20 0 0 0 20-20V40a20 20 0 0 0-20-20m-4 192H44V44h168Zm-100-36v-56a12 12 0 0 1 21.43-7.41A40 40 0 0 1 192 148v28a12 12 0 0 1-24 0v-28a16 16 0 0 0-32 0v28a12 12 0 0 1-24 0m-16-56v56a12 12 0 0 1-24 0v-56a12 12 0 0 1 24 0M68 80a16 16 0 1 1 16 16a16 16 0 0 1-16-16"/></symbol><use href="#ai:ph:linkedin-logo-bold"></use>  </svg> </a> </div> </div> </div>  </div>  <footer class="mt-20 border-t border-slate-200"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"> <div class="grid grid-cols-1 md:grid-cols-4 gap-8"> <!-- Products Column --> <div> <h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">
Products
</h3> <ul class="space-y-3"> <li> <a href="https://photoship.app" class="text-base text-gray-500 hover:text-red-500]">
Photoship
</a> </li> <li> <a href="https://orangegas.utilitygods.com" class="text-base text-gray-500 hover:text-red-500]">
Orange Gas
</a> </li> <li> <a href="https://github.com/Utility-Gods/qr-gen-ai" class="text-base text-gray-500 hover:text-red-500]">
QR Generator
</a> </li> </ul> </div> <!-- Developer Tools Column --> <div> <h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">
Developer Tools
</h3> <ul class="space-y-3"> <li> <a href="https://github.com/Utility-Gods/go-htmx-templ-echo-air-tailwind" class="text-base text-gray-500 hover:text-red-500]">
Go HTMX Template
</a> </li> <li> <a href="https://github.com/Utility-Gods/python-fastapi-sqlchemy-htmx-tailwind" class="text-base text-gray-500 hover:text-red-500]">
FastAPI Template
</a> </li> <li> <a href="https://github.com/Utility-Gods/gottem" class="text-base text-gray-500 hover:text-red-500]">
Gottem CLI
</a> </li> </ul> </div> <!-- Company Column --> <div> <h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">
Company
</h3> <ul class="space-y-3"> <li> <a href="/about" class="text-base text-gray-500 hover:text-red-500]">
About
</a> </li> <li> <a href="/team" class="text-base text-gray-500 hover:text-red-500]">
Team
</a> </li> <li> <a href="/blog" class="text-base text-gray-500 hover:text-red-500]">
Blog
</a> </li> <li> <a href="/contact" class="text-base text-gray-500 hover:text-red-500]">
Contact
</a> </li> <li> <a href="/fillo-privacy" class="text-base text-gray-500 hover:text-red-500]">
Privacy Policy
</a> </li> </ul> </div> <!-- Social Column --> <div> <h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">
Connect
</h3> <ul class="flex flex-col space-y-3"> <li> <a href="https://github.com/Utility-Gods" class="text-gray-500 hover:text-red-500 flex items-center gap-2"> <svg width="1em" height="1em" class="w-5 h-5" data-icon="ph:github-logo-bold">   <symbol id="ai:ph:github-logo-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M212.62 75.17A63.7 63.7 0 0 0 206.39 26A12 12 0 0 0 196 20a63.71 63.71 0 0 0-50 24h-20a63.71 63.71 0 0 0-50-24a12 12 0 0 0-10.39 6a63.7 63.7 0 0 0-6.23 49.17A61.5 61.5 0 0 0 52 104v8a60.1 60.1 0 0 0 45.76 58.28A43.66 43.66 0 0 0 92 192v4H76a20 20 0 0 1-20-20a44.05 44.05 0 0 0-44-44a12 12 0 0 0 0 24a20 20 0 0 1 20 20a44.05 44.05 0 0 0 44 44h16v12a12 12 0 0 0 24 0v-40a20 20 0 0 1 40 0v40a12 12 0 0 0 24 0v-40a43.66 43.66 0 0 0-5.76-21.72A60.1 60.1 0 0 0 220 112v-8a61.5 61.5 0 0 0-7.38-28.83M196 112a36 36 0 0 1-36 36h-48a36 36 0 0 1-36-36v-8a37.87 37.87 0 0 1 6.13-20.12a11.65 11.65 0 0 0 1.58-11.49a39.9 39.9 0 0 1-.4-27.72a39.87 39.87 0 0 1 26.41 17.8a12 12 0 0 0 10.1 5.53h32.35a12 12 0 0 0 10.11-5.53a39.84 39.84 0 0 1 26.41-17.8a39.9 39.9 0 0 1-.4 27.72a12 12 0 0 0 1.61 11.53A37.85 37.85 0 0 1 196 104Z"/></symbol><use href="#ai:ph:github-logo-bold"></use>  </svg> <span>GitHub</span> </a> </li> <li> <a href="https://www.linkedin.com/company/utility-gods/" class="text-gray-500 hover:text-red-500 flex items-center gap-2"> <svg width="1em" height="1em" viewBox="0 0 256 256" class="w-5 h-5" data-icon="ph:linkedin-logo-bold">   <use href="#ai:ph:linkedin-logo-bold"></use>  </svg> <span>LinkedIn</span> </a> </li> <li> <a href="/contact" class="text-gray-500 hover:text-red-500 flex items-center gap-2"> <svg width="1em" height="1em" class="w-5 h-5" data-icon="ph:envelope-bold">   <symbol id="ai:ph:envelope-bold" viewBox="0 0 256 256"><path fill="currentColor" d="M224 44H32a12 12 0 0 0-12 12v136a20 20 0 0 0 20 20h176a20 20 0 0 0 20-20V56a12 12 0 0 0-12-12m-96 83.72L62.85 68h130.3Zm-35.21.28L44 172.72V83.28Zm17.76 16.28l9.34 8.57a12 12 0 0 0 16.22 0l9.34-8.57l47.7 43.72H62.85ZM163.21 128L212 83.28v89.44Z"/></symbol><use href="#ai:ph:envelope-bold"></use>  </svg> <span>Email</span> </a> </li> </ul> </div> </div> <div class="mt-8 pt-8 border-t border-slate-200"> <p class="text-center text-base text-slate-500">
Copyright © 2025 Utility Gods. All rights reserved.
</p> <p class="text-center text-sm text-slate-400 mt-2">Built with ❤️</p> </div> </div> </footer>  </body> </html>